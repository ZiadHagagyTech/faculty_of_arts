<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">

    <title>ุชุณุฌูู ุจูุงูุงุช ุงูุทุงูุจ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- ูุงู ุจุงุฑ -->
    <nav class="navbar">
        <!-- ููุฌู ุงููุต -->
        <div class="navlogo">ูููุฉ ุงูุขุฏุงุจ - ูุณู ุงูููุชุจุงุช</div>

        <!-- ุงูุฑูุงุจุท -->
        <ul class="nav-links" id="navLinks">
            <li><a href="./index.html">ุชุณุฌูู ุฌุฏูุฏ</a></li>
            <li><a href="./search.html">ุงุณุชุนูุงู</a></li>
            <li><a href="./login.html">ุงูุงุญุตุงุฆูุงุช ูุงูุชูุงุฑูุฑ</a></li>
            <li><a href="./member.html">ุฃุนุถุงุก ุงููุฌููุนุฉ</a></li>
        </ul>

        <!-- ุฒุฑ ุงูุชุจุฏูู ููููุงุชู -->
        <button class="toggle-btn" id="toggleBtn">
            โฐ
        </button>
    </nav>

    <div class="container">
        <h1><i class="fas fa-user-graduate"></i> ุชุณุฌูู ุจูุงูุงุช ุงูุทุงูุจ</h1>
        <form id="registration-form" onsubmit="saveData(event);">
            <div class="input-group">
                <label for="student-name"><i class="fas fa-user"></i> ุงุณู ุงูุทุงูุจ:</label>
                <input type="text" id="student-name" name="student-name" required pattern="^[\u0600-\u06FF\s]{4,}$" title="ูุฌุจ ุฅุฏุฎุงู ุงูุงุณู ุจุงููุบุฉ ุงูุนุฑุจูุฉ ููููู ุฑุจุงุนูุงู">
            </div>

            <div class="input-group">
                <label for="student-year"><i class="fas fa-calendar-alt"></i> ุงููุฑูุฉ:</label>
                <input type="text" id="student-year" name="student-year" required>
            </div>
          
          <div class="input-group">
                <label for="specialization"><i class="fa-solid fa-building"></i> ุงูุดุนุจุฉ:</label>
                <input type="text" id="specialization" name="specialization" required>
            </div>

            <div class="input-group">
                <label for="academic-year"><i class="fas fa-school"></i> ุงูุนุงู ุงูุฌุงูุนู:</label>
                <input type="number" id="academic-year" name="academic-year" required>
            </div>

            <div class="input-group">
                <label for="student-photo"><i class="fas fa-camera"></i> ุตูุฑุฉ ุงูุทุงูุจ:</label>
                <div class="file-input-wrapper">
                    <input type="file" id="student-photo" name="student-photo" accept="image/*" required onchange="displayImage(event)">
                    <label for="student-photo" class="file-label"><i class="fas fa-upload"></i> ุงุฎุชุฑ ุตูุฑุฉ</label>
                </div>
                <img id="image-preview" class="image-preview" src="#" alt="Preview" style="display: none;">
            </div>

            <div class="button-group">
                <button type="submit"><i class="fas fa-paper-plane" id="submit"></i> ุชุณุฌูู</button>
            </div>
        </form>
    </div>

    <footer>
        <p>ุฌููุน ุงูุญููู ูุญููุธุฉ &copy; 2025 <a href="https://wa.me/201027888008">Ziad Hagagy</a></p>
    </footer>




    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
        import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-database.js";
    
        // ๐น ุฅุนุฏุงุฏ Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyACSaxwz6-ef5GyvWAbDpDJKEKe-fG49s",
            authDomain: "project-of-arts.firebaseapp.com",
            databaseURL: "https://project-of-arts-default-rtdb.firebaseio.com",
            projectId: "project-of-arts",
            storageBucket: "project-of-arts.appspot.com",
            messagingSenderId: "779880036064",
            appId: "1:779880036064:web:8ce84af51d78d9a38ca0fd"
        };
    
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
    
        window.saveData = function(event) {
            event.preventDefault(); 
    
            // ๐น ุฌูุจ ุจูุงูุงุช ุงูููุฑู
            const studentName = document.getElementById("student-name").value.trim();
            const studentYear = document.getElementById("student-year").value.trim();
            const specialization = document.getElementById("specialization").value.trim();
            const academicYear = document.getElementById("academic-year").value.trim();
            const studentPhoto = document.getElementById("student-photo").files[0];
    
            if (!studentName || !studentYear || !specialization || !academicYear || !studentPhoto) {
                alert("โ ูุฑุฌู ููุก ุฌููุน ุงูุญููู ูุงุฎุชูุงุฑ ุตูุฑุฉ");
                return;
            }
    
            const reader = new FileReader();
            reader.readAsDataURL(studentPhoto);
            reader.onload = function () {
                const photoBase64 = reader.result;
    
                const studentRef = ref(database, "students/" + studentName);
    
                // ๐น ุงูุชุญูู ููุง ุฅุฐุง ูุงู ุงูุงุณู ููุฌูุฏูุง ุจุงููุนู
                get(child(ref(database), "students/" + studentName))
                .then((snapshot) => {
                    if (snapshot.exists()) {
                        alert("โ ูุฐุง ุงูุงุณู ูุณุฌู ุจุงููุนูุ ูุง ููููู ุงูุชุณุฌูู ูุฑุฉ ุฃุฎุฑู.");
                    } else {
                        // ๐น ุญูุธ ุงูุจูุงูุงุช ูู Firebase
                        set(studentRef, {
                            name: studentName,
                            year: studentYear,
                            specialization: specialization,
                            academicYear: academicYear,
                            photo: photoBase64  
                        })
                        .then(() => {
                            // ๐น ุญูุธ ุงูุจูุงูุงุช ูู localStorage
                            localStorage.setItem("studentName", studentName);
                            localStorage.setItem("studentYear", studentYear);
                            localStorage.setItem("specialization", specialization);
                            localStorage.setItem("academicYear", academicYear);
                            localStorage.setItem("studentPhoto", photoBase64);
    
                            alert("โ  ุชู ุญูุธ ุงูุจูุงูุงุช ุจูุฌุงุญ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช");
                            window.location.href = "./student_id.html"; // ๐น ุชูุฌูู ุงููุณุชุฎุฏู ููุตูุญุฉ ุงูุฃุฎุฑู
                        })
                        .catch((error) => {
                            console.error("โ ุญุฏุซ ุฎุทุฃ: ", error);
                        });
                    }
                })
                .catch((error) => {
                    console.error("โ ุฎุทุฃ ูู ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช: ", error);
                });
            };
        };
    </script>






    <script>

        function displayImage(event) {
            const imagePreview = document.getElementById('image-preview');
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    imagePreview.src = e.target.result;
                    imagePreview.style.display = 'block';
                }
                reader.readAsDataURL(file);
            }
        }

        function validateForm() {
    const studentName = document.getElementById('student-name').value.trim();
    const studentYear = document.getElementById('student-year').value.trim();
    const specialization = document.getElementById('specialization').value.trim();
    const academicYear = document.getElementById('academic-year').value.trim();
    const studentPhoto = document.getElementById('student-photo').files.length;

    if (studentName.split(/\s+/).length !== 4) {
        alert('ุงูุงุณู ูุฌุจ ุฃู ูููู ุฑุจุงุนูุงู ููููุงู ูู 4 ูููุงุช.');
        return false;
    }

    if (studentName && studentYear && specialization && academicYear && studentPhoto) {
        // ุชุฎุฒูู ุงูุจูุงูุงุช ูู localStorage
        localStorage.setItem('studentName', studentName);
        localStorage.setItem('studentYear', studentYear);
        localStorage.setItem('specialization', specialization);
        localStorage.setItem('academicYear', academicYear);

        window.location.href = 'student_id.html';
        return false;
    }

    return false;
}





        function saveData() {
    const studentName = document.getElementById('student-name').value.trim();
    const studentYear = document.getElementById('student-year').value.trim();
    const specialization = document.getElementById('specialization').value.trim();
    const academicYear = document.getElementById('academic-year').value.trim();
    const studentPhoto = document.getElementById('student-photo').files[0];

    if (studentName.split(/\s+/).length !== 4) {
        alert('ุงูุงุณู ูุฌุจ ุฃู ูููู ุฑุจุงุนูุงู ููููุงู ูู 4 ูููุงุช.');
        return false;
    }

    localStorage.setItem('studentName', studentName);
    localStorage.setItem('studentYear', studentYear);
    localStorage.setItem('specialization', specialization);
    localStorage.setItem('academicYear', academicYear);

    if (studentPhoto) {
        const reader = new FileReader();
        reader.onload = function (e) {
            localStorage.setItem('studentPhoto', e.target.result);
            window.location.href = 'student_id.html'; 
        };
        reader.readAsDataURL(studentPhoto);
    } else {
        window.location.href = 'student_id.html';
    }
}





       // ุฌูุจ ุงูุนูุงุตุฑ
       const toggleBtn = document.getElementById('toggleBtn');
const navLinks = document.getElementById('navLinks');
const body = document.body;

// ุฅุถุงูุฉ ุญุฏุซ ุงูููุฑ ุนูู ุฒุฑ ุงูุชุจุฏูู
toggleBtn.addEventListener('click', () => {
    // ุชุจุฏูู ุนุฑุถ ุงูุฑูุงุจุท
    navLinks.classList.toggle('active');

    // ุฅุถุงูุฉ ุฃู ุฅุฒุงูุฉ ูุฆุฉ "menu-open" ูู ุงูุฌุณู
    body.classList.toggle('menu-open');
});











// ุชุนุทูู ุงูุฒุฑ ุงูุฃููู
document.addEventListener("contextmenu", function (e) {
        e.preventDefault();
    });

    // ุชุนุทูู ุงุฎุชุตุงุฑุงุช F12 ู Ctrl+Shift+I ู Ctrl+Shift+J ู Ctrl+U
    document.addEventListener("keydown", function (e) {
        if (e.key === "F12" || 
            (e.ctrlKey && e.shiftKey && (e.key === "I" || e.key === "J")) || 
            (e.ctrlKey && e.key === "U")) {
            e.preventDefault();
        }
    });


    </script>


</body>
</html>


